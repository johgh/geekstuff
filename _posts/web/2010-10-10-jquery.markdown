---
layout: post
title:  "Jquery"
permalink:  "jquery"
date:   2015-07-25 16:30:15
category: WebDev
tags: Web
---


Trigger + stop propagation
: {% highlight javascript %}
    $(document).on('click', 'tr', function() {
        $(this).find('.cb_item').trigger('click');
    });
    // .js-edit is inside tr, but we don't want the trigger in this case
    $(document).on('click', '.js-edit', function(e) {
        do_something(this);
        e.stopPropagation();
    });
{% endhighlight %}

Jquery loop + push into array + parents()
: {% highlight javascript %}
    var vars = {}; // object
    vars.softwares = []; // array
    $('select.my_class').each(function() {
        var version = $(this).parents('.item').val(); // parents() finds upwards
        vars.softwares.push({idSoftware: $(this).val(), version: version}); // push an object into the array
    });
{% endhighlight %}

Arrays/objects iteration
: {% highlight javascript %}
    $.each([ 52, 97 ], function( index, value ) {
        alert( index + ": " + value ); 
    });
{% endhighlight %}

Debug
: {% highlight javascript %}
    console.log(bla.toSource());
{% endhighlight %}

Prototyped function
: {% highlight javascript %}
    $.fn.myExtension = function(){
        var currentjQueryObject = this;
        //work with currentObject
        return this; //you can include this if you would like to support chaining
    };
{% endhighlight %}

Ternary logic, length, filter, prop...
: {% highlight javascript %}
    function checkRoot(parent){
        child = ((parent == 'js-r-0') ? '.js-sections-read' : '.js-sections-write');
        var totalChilds = $(child + "[id!='" + parent + "']").length;
        var value = ($(child + "[id!='" + parent + "']").filter(':checked').length == totalChilds);
        $('#' + parent).prop('checked', value);
    }
{% endhighlight %}

"Live" event
: {% highlight javascript %}
    $(document).on('click', '.js-changePage', function() {
    });
{% endhighlight %}

$.param + serialize
: {% highlight javascript %}
    vars = {};
    vars.insert_event = 1;
    vars.arr_sched = arr_sched;
    varsForm = $("#form_add").serialize();
    // vars ready to pass to an ajax request, for example
    vars = $.param(vars) + '&' + varsForm
{% endhighlight %}

Serialize form into array and transform it into an object
: {% highlight javascript %}
    var arrForm = $('form').serializeArray();
    var data = {ids: {}};
    $(arrForm).each(function(index, obj){
        if (obj.name == 'ids[]') {
            data['ids'][index] = obj.value;
        } else {
            data[obj.name] = obj.value;
        }
    });
{% endhighlight %}

Request a file and send POST data as JSON
: {% highlight javascript %}
    // this function requests a file with a hidden iframe/form
    function fileRequest(fileName, myData) {
        var iframe = '<iframe id="iframe" name="iframe" style="display:none;">';
        var form = '<form method="post" target="iframe" action="action_SubirFicheros.php" id="iframeForm">' +
                        + '<input type="hidden" name="fileName" value="' + fileName + '">' +
                        + '<input type="hidden" name="myData" value=\'' + JSON.stringify(myData) + '\'>' +
                        // json data is recovered as assoc array in php with "json_decode($_POST['myData'], true)";
                    + '</form>';
        $("body").append(iframe).append(form);
        $("#iframeForm").submit().remove();
    }
{% endhighlight %}

Radio button value
: {% highlight javascript %}
    $('input[name="genderS"]:checked').val();
{% endhighlight %}

Js utf8 encode/decode string
: {% highlight javascript %}
    // encode
    unescape(encodeURIComponent(s));
    // decode
    decodeURIComponent(escape(s));
{% endhighlight %}

